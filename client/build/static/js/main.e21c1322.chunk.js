(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[1],{11:function(t,e,n){"use strict";var o=n(17),a=n(44),r=n(1),c=n(4),i={profilePicModal:{isVisible:!1},postModal:{isVisible:!1},settingsModal:{isVisible:!1,loading:!1},navbar:{isVisible:!0},logged:{isLoading:!1,isLogged:!1,token:null,username:null,profilePic:null,description:null,openProfile:null,error:null}},u=n(15),s={loading:!0,visibleSidenav:!0,editingDescription:!1,username:null,description:null,profilePic:null},l=n(19),d=n(13),f={loading:!1,isThereMore:!0,offset:0,quantity:5,items:[]},p=n(24),b={loading:!1,items:[]},O=n(46),g=Object(o.combineReducers)({app:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case c.k:var n=e.payload.value;return Object(r.a)(Object(r.a)({},t),{},{navbar:{isVisible:n}});case c.n:return Object(r.a)(Object(r.a)({},t),{},{settingsModal:Object(r.a)(Object(r.a)({},t.settingsModal),{},{isVisible:!t.settingsModal.isVisible})});case c.l:return Object(r.a)(Object(r.a)({},t),{},{postModal:{isVisible:!t.postModal.isVisible}});case c.m:return Object(r.a)(Object(r.a)({},t),{},{profilePicModal:{isVisible:!t.profilePicModal.isVisible}});case c.g:return Object(r.a)(Object(r.a)({},t),{},{logged:Object(r.a)(Object(r.a)({},t.logged),{},{openProfile:e.payload.openProfile})});case c.d:var o=e.payload.value;return Object(r.a)(Object(r.a)({},t),{},{logged:Object(r.a)(Object(r.a)({},t.logged),{},{isLoading:o})});case c.h:return Object(r.a)(Object(r.a)({},t),{},{settingsModal:Object(r.a)(Object(r.a)({},t.settingsModal),{},{loading:e.payload.value})});case c.f:return Object(r.a)(Object(r.a)({},t),{},{logged:Object(r.a)(Object(r.a)({},t.logged),{},{profilePic:e.payload.url})});case c.e:return Object(r.a)(Object(r.a)({},t),{},{logged:Object(r.a)(Object(r.a)({},t.logged),{},{description:e.payload.description})});case c.j:case c.i:return localStorage.setItem("last_session",JSON.stringify(Object(r.a)({},e.payload))),Object(r.a)(Object(r.a)({},t),{},{logged:Object(r.a)({isLoading:!1,isLogged:!0},e.payload)});case c.b:var a=e.payload.last_session;return Object(r.a)(Object(r.a)({},t),{},{logged:Object(r.a)(Object(r.a)({},a),{},{isLoading:!1,isLogged:!0,profilePic:a.profilePic})});case c.c:return localStorage.setItem("last_session",JSON.stringify(Object(r.a)({},t.logged))),t;case c.a:return Object(r.a)(Object(r.a)({},t),{},{logged:i.logged});default:return t}},profile:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case u.f:return Object(r.a)(Object(r.a)({},t),{},{visibleSidenav:!t.visibleSidenav});case u.e:return Object(r.a)(Object(r.a)({},t),{},{editingDescription:!t.editingDescription});case u.a:return Object(r.a)(Object(r.a)(Object(r.a)({},t),e.payload),{},{profilePic:e.payload.profilePic});case u.c:return Object(r.a)(Object(r.a)({},t),{},{loading:e.payload.loading});case u.g:return Object(r.a)(Object(r.a)({},t),{},{profilePic:e.payload.url});case u.d:return Object(r.a)(Object(r.a)({},t),{},{description:e.payload.description});case u.b:return s;default:return t}},posts:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:f,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case d.c:return Object(r.a)(Object(r.a)({},t),{},{isThereMore:!!e.payload.length,offset:t.offset+t.quantity,items:[].concat(Object(l.a)(t.items),Object(l.a)(e.payload.map((function(t){return Object(r.a)(Object(r.a)({},t),{},{author:Object(r.a)(Object(r.a)({},t.author),{},{profilePic:t.author.profilePic})})}))))});case d.b:return Object(r.a)(Object(r.a)({},t),{},{items:[].concat(Object(l.a)(t.items),Object(l.a)(e.payload.map((function(t){return Object(r.a)(Object(r.a)({},t),{},{author:Object(r.a)(Object(r.a)({},t.author),{},{profilePic:t.author.profilePic})})}))))});case d.e:return Object(r.a)(Object(r.a)({},t),{},{items:[Object(r.a)(Object(r.a)({},e.payload.newPost),{},{author:Object(r.a)(Object(r.a)({},e.payload.newPost.author),{},{profilePic:e.payload.newPost.author.profilePic})})].concat(Object(l.a)(t.items))});case d.d:var n=e.payload.likedPost;return Object(r.a)(Object(r.a)({},t),{},{items:t.items.map((function(t){return t._id===n._id?Object(r.a)(Object(r.a)({},t),{},{likes:n.likes,likedBy:n.likedBy,liked:!0}):t}))});case d.h:var o=e.payload.unlikedPost;return Object(r.a)(Object(r.a)({},t),{},{items:t.items.map((function(t){return t._id===o._id?Object(r.a)(Object(r.a)({},t),{},{likes:o.likes,likedBy:o.likedBy,liked:!1}):t}))});case d.a:return Object(r.a)(Object(r.a)({},t),{},{items:t.items.filter((function(t){return t._id!==e.payload.deletedPost._id}))});case d.g:return Object(r.a)(Object(r.a)({},t),{},{loading:e.payload.loading});case d.i:var a=e.payload.username,c=t.items.map((function(t){return t.author.username===a?Object(r.a)(Object(r.a)({},t),{},{author:Object(r.a)(Object(r.a)({},t.author),{},{profilePic:e.payload.url})}):t}));return Object(r.a)(Object(r.a)({},t),{},{items:c});case d.f:return f;default:return t}},users:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:b,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case p.a:return Object(r.a)(Object(r.a)({},t),{},{items:e.payload.map((function(t){return Object(r.a)(Object(r.a)({},t),{},{profilePic:t.profilePic})}))});case p.c:return Object(r.a)(Object(r.a)({},t),{},{loading:e.payload.loading});case p.b:return b;default:return t}}}),h=Object(o.createStore)(g,Object(a.composeWithDevTools)(Object(o.applyMiddleware)(O.a)));e.a=h},13:function(t,e,n){"use strict";n.d(e,"c",(function(){return c})),n.d(e,"e",(function(){return i})),n.d(e,"b",(function(){return u})),n.d(e,"a",(function(){return s})),n.d(e,"f",(function(){return l})),n.d(e,"g",(function(){return d})),n.d(e,"d",(function(){return f})),n.d(e,"h",(function(){return p})),n.d(e,"i",(function(){return b})),n.d(e,"l",(function(){return O})),n.d(e,"k",(function(){return g})),n.d(e,"n",(function(){return h})),n.d(e,"m",(function(){return j})),n.d(e,"p",(function(){return y})),n.d(e,"j",(function(){return P})),n.d(e,"q",(function(){return E})),n.d(e,"o",(function(){return T}));var o=n(1),a=n(6),r=new(n(14).a),c="[POST] FETCH_USER_POSTS",i="[POST] NEW_POST",u="[POST] DISCOVER_POSTS",s="[POST] DELETE_POST",l="[POST] RESTART_STATE",d="[POST] SET_LOADING",f="[POST] LIKE_POST",p="[POST] UNLIKE_POST",b="[POST] UPDATE_PROFILE_PICTURE",O=function(t){return function(e,n){var i=n(),u=i.posts,s=u.offset,l=u.quantity,d=u.isThereMore,f=u.loading,p=i.app.logged.username;d&&!f?(e(m(!0)),r.get("user/".concat(t,"/posts?offset=").concat(s,"&quantity=").concat(l)).then((function(t){200===t.code&&e({type:c,payload:t.response.map((function(t){return Object(o.a)(Object(o.a)({},t),{},{liked:t.likedBy.includes(p)})}))})})).catch((function(t){return console.log(t)})).then((function(){return e(m(!1))}))):f||a.a.info("You have reached the bottom \ud83d\ude31!",{position:"bottom-right"})}},g=function(t){return function(t,e){var n=e(),c=n.posts,i=c.isThereMore,s=c.loading,l=n.app.logged._id;i&&!s?(t(m(!0)),r.get("discover/posts").then((function(e){200===e.code&&t({type:u,payload:e.response.map((function(t){return Object(o.a)(Object(o.a)({},t),{},{liked:t.likedBy.includes(l)})}))})})).catch((function(t){return console.log(t)})).then((function(){return t(m(!1))}))):a.a.info("You have reached the bottom \ud83d\ude31!",{position:"bottom-right"})}},h=function(t){return function(e,n){var c=n().profile.username,u=t.username;t.message;r.post("user/".concat(u,"/new/post"),Object(o.a)({},t)).then((function(t){200===t.code&&(a.a.success("Post submitted",{position:"bottom-right"}),u===c&&e({type:i,payload:{newPost:t.response}}))})).catch((function(t){a.a.error("There were an error submitting your post.",{position:"bottom-right"})}))}},j=function(t){return function(e,n){n();r.post("post/".concat(t,"/like")).then((function(t){200===t.code&&e({type:f,payload:{likedPost:t.response}})})).catch((function(t){return console.log(t)}))}},y=function(t){return function(e,n){n();r.post("post/".concat(t,"/unlike")).then((function(t){200===t.code&&e({type:p,payload:{unlikedPost:t.response}})})).catch((function(t){return console.log(t)}))}},P=function(t){return function(e){var n=t.postId;r.delete("post/".concat(n)).then((function(t){a.a.warn("Post deleted",{position:"bottom-right"}),e({type:s,payload:Object(o.a)({},t)})})).catch((function(t){return console.log(t)}))}},m=function(t){return function(e){return e({type:d,payload:{loading:t}})}},E=function(t){return function(e,n){var o=n().app.logged.username;e({type:b,payload:{url:t,username:o}})}},T=function(t){return function(t){return t({type:l})}}},14:function(t,e,n){"use strict";var o=n(21),a=n(22),r=n(18),c=n.n(r),i=n(6),u=n(11),s=n(4),l=function(){function t(){Object(o.a)(this,t),this.baseUrl="http://localhost:8000/api"}return Object(a.a)(t,[{key:"get",value:function(t){var e=this,n=u.a.getState(),o={headers:{}};return n.app.logged.token&&(o.headers.authToken=n.app.logged.token),new Promise((function(n,a){c.a.get("".concat(e.baseUrl,"/").concat(t),o).then((function(t){return n(t.data)})).catch((function(t){var e=t.response,n=e.status,o=e.data;switch(n){case 401:u.a.dispatch(Object(s.o)())}i.a.error("".concat(n,": ").concat(o.message),{position:"bottom-right"}),a(t)}))}))}},{key:"post",value:function(t,e){var n=this,o=u.a.getState(),a={headers:{}};return o.app.logged.token&&(a.headers.authToken=o.app.logged.token),new Promise((function(o,r){c.a.post("".concat(n.baseUrl,"/").concat(t),e,a).then((function(t){return o(t.data)})).catch((function(t){var e=t.response,n=e.status,o=e.data;switch(n){case 401:u.a.dispatch(Object(s.o)())}i.a.error("".concat(n,": ").concat(o.message),{position:"bottom-right"}),r(t)}))}))}},{key:"patch",value:function(t,e){var n=this,o=u.a.getState();if(o.app.logged.token){var a={headers:{authToken:o.app.logged.token}};return new Promise((function(o,r){c.a.patch("".concat(n.baseUrl,"/").concat(t),e,a).then((function(t){return o(t.data)})).catch((function(t){var e=t.response,n=e.status,o=e.data;switch(n){case 401:u.a.dispatch(Object(s.o)())}i.a.error("".concat(n,": ").concat(o.message),{position:"bottom-right"}),r(t)}))}))}}},{key:"delete",value:function(t,e){var n=this,o=u.a.getState();if(o.app.logged.token){var a={headers:{authToken:o.app.logged.token},data:e};return new Promise((function(e,o){c.a.delete("".concat(n.baseUrl,"/").concat(t),a).then((function(t){return e(t.data)})).catch((function(t){var e=t.response,n=e.status,a=e.data;switch(n){case 401:u.a.dispatch(Object(s.o)())}i.a.error("".concat(n,": ").concat(a.message),{position:"bottom-right"}),o(t)}))}))}}}]),t}();e.a=l},15:function(t,e,n){"use strict";n.d(e,"a",(function(){return i})),n.d(e,"b",(function(){return u})),n.d(e,"c",(function(){return s})),n.d(e,"g",(function(){return l})),n.d(e,"e",(function(){return d})),n.d(e,"d",(function(){return f})),n.d(e,"f",(function(){return p})),n.d(e,"k",(function(){return b})),n.d(e,"j",(function(){return O})),n.d(e,"l",(function(){return g})),n.d(e,"h",(function(){return h})),n.d(e,"i",(function(){return y}));var o=n(1),a=n(6),r=n(14),c=(n(4),new r.a),i="[PROFILE] FETCH_PROFILE",u="[PROFILE] RESTART_STATE",s="[PROFILE] SET_LOADING",l="[PROFILE] UPDATE_PROFILE_PICTURE",d="[PROFILE] TOGGLE_EDITING_DESCRIPTION",f="[APP] SET_PROFILE_DESCRIPTION",p="[PROFILE] TOGGLE_SIDENAV",b=function(){return function(t){t({type:p})}},O=function(){return function(t){t({type:d})}},g=function(t){return console.log(t),function(e){e({type:l,payload:{url:t}})}},h=function(t){return function(e,n){var r=n();e(j(!0)),c.get("user/".concat(t)).then((function(t){200===t.code&&e({type:i,payload:Object(o.a)(Object(o.a)({},t.response),{},{ownProfile:r.app.logged.username===t.response.username})})})).catch((function(t){switch(t.response.status){case 404:a.a.danger("404: User not found",{position:"bottom-right"});break;default:a.a.danger("Unexpected error",{position:"bottom-right"})}})).then((function(){e(j(!1))}))}},j=function(t){return function(e){return e({type:s,payload:{loading:t}})}},y=function(t){return function(t){return t({type:u})}}},24:function(t,e,n){"use strict";n.d(e,"a",(function(){return a})),n.d(e,"b",(function(){return r})),n.d(e,"c",(function(){return c})),n.d(e,"d",(function(){return i})),n.d(e,"e",(function(){return s}));n(18),n(6);var o=new(n(14).a),a="DISCOVER_USERS",r="RESTART_STATE",c="SET_LOADING",i=function(t){return function(t,e){e();t(u(!0)),o.get("discover/users").then((function(e){200==e.code&&t({type:a,payload:e.response}),t(u(!1))})).catch((function(t){return console.log(t)}))}},u=function(t){return function(e){return e({type:c,payload:{loading:t}})}},s=function(t){return function(t){return t({type:r})}}},4:function(t,e,n){"use strict";n.d(e,"k",(function(){return c})),n.d(e,"l",(function(){return i})),n.d(e,"m",(function(){return u})),n.d(e,"n",(function(){return s})),n.d(e,"g",(function(){return l})),n.d(e,"j",(function(){return d})),n.d(e,"i",(function(){return f})),n.d(e,"b",(function(){return p})),n.d(e,"a",(function(){return b})),n.d(e,"h",(function(){return O})),n.d(e,"d",(function(){return g})),n.d(e,"f",(function(){return h})),n.d(e,"c",(function(){return j})),n.d(e,"e",(function(){return y})),n.d(e,"w",(function(){return E})),n.d(e,"z",(function(){return T})),n.d(e,"x",(function(){return v})),n.d(e,"y",(function(){return S})),n.d(e,"p",(function(){return _})),n.d(e,"q",(function(){return I})),n.d(e,"o",(function(){return k})),n.d(e,"u",(function(){return L})),n.d(e,"t",(function(){return A})),n.d(e,"s",(function(){return R})),n.d(e,"r",(function(){return w})),n.d(e,"v",(function(){return N}));var o=n(1),a=(n(18),n(6)),r=new(n(14).a),c="[APP] TOGGLE_NAVBAR",i="[APP] TOGGLE_POST_MODAL",u="[APP] TOGGLE_PROFILE_PICTURE_MODAL",s="[APP] TOGGLE_SETTINGS_MODAL",l="[APP] SET_PROFILE_PRIVACY",d="[APP] SIGN_UP",f="[APP] SIGN_IN",p="[APP] RECONNECT",b="[APP] LOGOUT",O="[APP] SET_SETTINGS_LOADING",g="[APP] SET_LOGIN_LOADING",h="[APP] SET_PROFILE_PICTURE",j="[APP] RESET_LAST_CONNECTION",y="[APP] SET_PROFILE_DESCRIPTION",P=function(t){return function(e){return e({type:g,payload:{value:t}})}},m=function(t){return function(e){return e({type:O,payload:{value:t}})}},E=function(){return function(t){return t({type:i})}},T=function(){return function(t){return t({type:s})}},v=function(){return function(t){return t({type:u})}},S=function(){return function(t){t(m(!0)),r.patch("user/settings/privacy").then((function(e){t({type:l,payload:e.response})})).catch((function(t){return console.log(t)})).then((function(){t(I()),t(m(!1))}))}},_=function(t){return function(e){e(P(!0)),e({type:p,payload:{last_session:t}})}},I=function(){return function(t){return t({type:j})}},k=function(){return function(t){localStorage.removeItem("last_session"),t(P(!0)),t({type:b}),window.location.href="/"}},L=function(t){var e=t.username,n=t.password;return function(t){t(P(!0)),r.post("auth/sign-up",{username:e,password:n}).then((function(e){200===e.code&&(a.a.success("Welcome @".concat(e.response.username,"!"),{position:"bottom-right"}),t({type:d,payload:Object(o.a)({},e.response)}))})).catch((function(t){return console.log(t)})).then((function(){return t(P(!1))}))}},A=function(t){var e=t.username,n=t.password;return function(t){t(P(!0)),r.post("auth/sign-in",{username:e,password:n}).then((function(e){200===e.code&&(a.a.success("Welcome back @".concat(e.response.username," :)!"),{position:"bottom-right"}),t({type:f,payload:Object(o.a)({},e.response)}))})).catch((function(t){return console.log(t)})).then((function(){return t(P(!1))}))}},R=function(t){return function(e){a.a.success("Profile picture updated!",{position:"bottom-right"}),e({type:h,payload:{url:t}}),e(I())}},w=function(t){return function(e){a.a.success("Description updated!",{position:"bottom-right"}),e({type:y,payload:{description:t}}),e(I())}},N=function(t){return function(e){return e({type:c,payload:{value:t}})}}},48:function(t,e,n){t.exports=n(75)},74:function(t,e,n){},75:function(t,e,n){"use strict";n.r(e);var o=n(0),a=n.n(o),r=n(16),c=n.n(r),i=n(11),u=n(31),s=n(4),l=n(21),d=n(22),f=n(30),p=n(29),b=n(33),O=n(5),g=Object(o.lazy)((function(){return n.e(11).then(n.bind(null,130))})),h=Object(o.lazy)((function(){return Promise.all([n.e(0),n.e(4),n.e(8)]).then(n.bind(null,129))})),j=Object(o.lazy)((function(){return n.e(10).then(n.bind(null,127))})),y=Object(o.lazy)((function(){return Promise.all([n.e(0),n.e(9)]).then(n.bind(null,131))})),P=Object(o.lazy)((function(){return n.e(7).then(n.bind(null,92))})),m=Object(o.lazy)((function(){return n.e(6).then(n.bind(null,128))})),E=Object(o.lazy)((function(){return n.e(5).then(n.bind(null,132))})),T=function(t){Object(f.a)(n,t);var e=Object(p.a)(n);function n(){return Object(l.a)(this,n),e.apply(this,arguments)}return Object(d.a)(n,[{key:"render",value:function(){return a.a.createElement(b.a,null,a.a.createElement(o.Suspense,{fallback:a.a.createElement("div",null)},a.a.createElement(O.c,null,a.a.createElement(O.a,{path:"/",component:g,exact:!0}),a.a.createElement(o.Fragment,null,a.a.createElement("div",{className:"d-flex page"},a.a.createElement(P,null),a.a.createElement(m,null),a.a.createElement(O.a,{path:"/explore",component:y}),a.a.createElement(O.a,{path:"/u/:id",component:h}),a.a.createElement(E,null))),a.a.createElement(O.a,{component:j}))))}}]),n}(o.Component),v=(n(74),i.a),S=localStorage.getItem("last_session");S&&v.dispatch(Object(s.p)(JSON.parse(S))),c.a.render(a.a.createElement(u.a,{store:i.a},a.a.createElement(T,null)),document.getElementById("root"))}},[[48,2,3]]]);
//# sourceMappingURL=main.e21c1322.chunk.js.map