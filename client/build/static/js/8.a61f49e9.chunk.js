(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[8],{129:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a(21),i=a(22),s=a(32),o=a(30),l=a(29),c=a(0),p=a.n(c),u=a(93),d=a.n(u),m=a(4),f=a(13),h=a(15),b=a(14),g=a(94),v=a.n(g);a(126);v.a.initializeApp({apiKey:"AIzaSyBbs0O_ZQuYV2n12TRSK__9-wxCTbHRQpU",authDomain:"media-59eb0.firebaseapp.com",databaseURL:"https://media-59eb0.firebaseio.com",projectId:"media-59eb0",storageBucket:"media-59eb0.appspot.com",messagingSenderId:"444793252027",appId:"1:444793252027:web:ffd8ee7dade748c6be619e",measurementId:"G-PM1GHN9196"});v.a.storage;var E=new b.a,y=a(87),x=a(31),P=a(82),N=a(78),j=a(122),w=a.n(j),k=a(76),O=a(123),_=a.n(O),D=(a(125),a(6)),S=function(e){Object(o.a)(a,e);var t=Object(l.a)(a);function a(e){var n;return Object(r.a)(this,a),(n=t.call(this,e)).state={file:null},n.cropper=p.a.createRef(),n.onFileSelected=n.onFileSelected.bind(Object(s.a)(n)),n.onFileError=n.onFileError.bind(Object(s.a)(n)),n.uploadPicture=n.uploadPicture.bind(Object(s.a)(n)),n}return Object(i.a)(a,[{key:"componentWillUnmount",value:function(){this.setState((function(){return{file:null}}))}},{key:"onFileSelected",value:function(e){this.setState((function(){return{file:e[0]}}))}},{key:"onFileError",value:function(e){D.a.info("Whoops, there was a problem with the image \ud83d\ude48.",{position:"bottom-right"})}},{key:"uploadPicture",value:function(){var e=this.cropper.current.cropper.getData();this.props.changeImage(this.state.file,e)}},{key:"render",value:function(){return p.a.createElement(k.a,{visible:this.props.isVisible,onClose:this.props.toggleProfilePictureModal,animation:"slideUp",customStyles:{height:"fit-content",width:"fit-content"}},p.a.createElement("div",{className:"mt-4",style:{maxWidth:"400px"}},!this.state.file&&p.a.createElement(w.a,{className:"dropzone mt-2",dropActiveClassName:"dropzone--active",accepts:["image/png","image/jpg","image/jpeg"],onChange:this.onFileSelected,onError:this.onFileError,maxFileSize:1e7,minFileSize:0,clickable:!0},p.a.createElement("div",{className:"d-flex flex-column h-100 justify-content-center"},p.a.createElement("h2",{className:"text-center"},p.a.createElement("i",{className:"far fa-file-image"})),p.a.createElement("p",{className:"text-center mb-0"},"Drag and drop your image here or..."),p.a.createElement("p",{className:"text-center mb-0 btn-link cursor-pointer"},"Upload one from your device"))),this.state.file&&p.a.createElement(_.a,{ref:this.cropper,src:this.state.file.preview.url,style:{height:500,width:"100%"},dragMode:"move",zoomable:!1,aspectRatio:1,viewMode:2,responsive:!0,guides:!1})),p.a.createElement("div",{className:"float-right mt-2"},p.a.createElement("button",{className:"btn btn-brand-secondary text-white mt-2",onClick:this.props.toggleProfilePictureModal},"Cancel"),p.a.createElement("button",{className:"btn btn-brand text-white ml-1 mt-2",onClick:this.uploadPicture,disabled:!this.state.file},"Upload")))}}]),a}(c.Component),I=Object(x.b)((function(e){return{isVisible:e.app.profilePicModal.isVisible}}),(function(e){return{changeImage:function(t,a){return e(function(e,t){return console.log("binary",e),function(a){var n=new d.a;n.append("crop",JSON.stringify(t)),n.append("newImage",e),E.patch("user/settings/profilePicture",n,{headers:{accept:"application/json","Accept-Language":"en-US,en;q=0.8","Content-Type":"multipart/form-data; boundary=".concat(n._boundary)}}).then((function(e){console.log("res",e),a(Object(m.x)()),a(Object(f.q)(e.response.path)),a(Object(h.l)(e.response.path)),a(Object(m.s)(e.response.path))})).catch((function(e){return console.log(e)}))}}(t,a))},toggleProfilePictureModal:function(){return e(Object(m.x)())}}}))(S),C=a(79),M=a(83),U=function(e){Object(o.a)(a,e);var t=Object(l.a)(a);function a(e){var n;return Object(r.a)(this,a),(n=t.call(this,e)).openProfilePictureModal=n.openProfilePictureModal.bind(Object(s.a)(n)),n.updateDescription=n.updateDescription.bind(Object(s.a)(n)),n}return Object(i.a)(a,[{key:"componentDidMount",value:function(){this.initializeProfile()}},{key:"componentDidUpdate",value:function(e,t,a){this.props.location!==e.location&&(this.props.restartState(),this.props.restartStatePosts(),this.initializeProfile())}},{key:"componentWillUnmount",value:function(){this.props.restartState(),this.props.restartStatePosts()}},{key:"fetchUserPosts",value:function(){var e=this.props.match.params.id;this.props.fetchUserPosts(e)}},{key:"initializeProfile",value:function(){this.props.fetchProfile(this.props.match.params.id),this.fetchUserPosts()}},{key:"openProfilePictureModal",value:function(){this.props.ownsProfile&&this.props.toggleProfilePictureModal()}},{key:"updateDescription",value:function(e){var t=this;e.preventDefault();var a=e.target.description.value;this.props.profile.description===a?D.a.warn(p.a.createElement("p",null,"Write something about you!!",p.a.createElement("strong",null,"descriptions are the same")),{position:"bottom-right"}):a.length>150?D.a.warn("Descriptions shouldn't be longer than 150 characters",{position:"bottom-right"}):Promise.resolve(this.props.changeDescription(a)).then((function(){return t.props.toggleEditingDescription()}))}},{key:"render",value:function(){var e=this;return p.a.createElement("div",{className:"d-flex flex-column flex-md-row profile w-100"},this.props.profilePicModal&&this.props.ownsProfile&&p.a.createElement(I,null),p.a.createElement("div",{className:"d-none d-md-flex sidenav flex-column "+(this.props.profile.visibleSidenav?"":"sidenav--inactive")},p.a.createElement("div",{className:"sidenav__description"},p.a.createElement("div",{onClick:this.openProfilePictureModal,className:"sidenav__avatar mx-auto d-block mt-5 mb-2"+(this.props.ownsProfile&&" sidenav__avatar--owner cursor-pointer")},p.a.createElement("img",{alt:"",src:this.props.profile.profilePic,className:"sidenav__avatar__image img-fluid rounded-circle mx-auto d-block w-100 h-100"}),p.a.createElement("span",{className:"sidenav__avatar--owner__camera"},p.a.createElement("i",{className:"fas fa-camera"}))),p.a.createElement("p",{className:"text-center text-dark title mt-3"},this.props.profile.username),this.props.profile.editingDescription?p.a.createElement("div",{className:"px-5 mb-3"},p.a.createElement("form",{onSubmit:this.updateDescription},p.a.createElement("div",{className:"form-group"},p.a.createElement("textarea",{className:"form-control",id:"description",defaultValue:this.props.profile.description,maxLength:150})),p.a.createElement("div",{className:"form-group d-flex justify-content-end"},p.a.createElement("button",{className:"btn btn-brand-secondary text-white mr-2 rounded-pill",type:"button",onClick:this.props.toggleEditingDescription},"Cancel"),p.a.createElement("button",{className:"btn btn-brand text-white rounded-pill"},"Update")))):p.a.createElement("p",{className:"text-left text-white text-wrap description px-5 mb-0"},this.props.profile.description||"It seems this user hasn't provided a description \ud83e\udd74!"),this.props.ownsProfile&&!this.props.profile.editingDescription&&p.a.createElement("a",{className:"text-left btn-link text-warning font-weight-bolder mt-3 btn px-5",onClick:this.props.toggleEditingDescription},"Edit description ",p.a.createElement("i",{className:"fas fa-pencil-alt"})),p.a.createElement("div",{className:"d-flex flex-column justify-content-between h-100"},p.a.createElement("div",{className:"d-flex justify-content-between px-5"},p.a.createElement("div",null,p.a.createElement("p",{className:"text-primary font-weight-bolder mb-0 mt-3"},this.props.profile.posts," Posts")),p.a.createElement("div",null,p.a.createElement("p",{className:"text-danger font-weight-bolder mb-0 mt-3"},this.props.profile.likes," Likes")))))),p.a.createElement(y.a,{onBottom:function(){e.setState((function(){return Object(n.a)({},e.state)})),e.fetchUserPosts()}},(function(t){return p.a.createElement("div",{className:"d-flex position-relative profile__body justify-content-center flex-wrap",ref:t},p.a.createElement(M.a,null,e.props.profile.openProfile||e.props.ownsProfile?p.a.createElement("div",{className:"profile__body__textarea w-100 mt-5"},p.a.createElement("div",{className:"card border-0"},p.a.createElement("div",{className:"card-body"},p.a.createElement(N.a,{profileId:e.props.match.params.id})))):p.a.createElement("p",{className:"mt-5"},p.a.createElement("i",{className:"fas fa-lock"})," This user doesn't allow posts on his profile.")),p.a.createElement("div",{className:"profile__body__posts w-100"},p.a.createElement("div",{className:"d-flex flex-column"},e.props.posts.map((function(e,t){return p.a.createElement(P.a,Object.assign({},e,{key:e.message+"_"+t}))})),e.props.postsLoading&&p.a.createElement("div",{className:"d-flex justify-content-center"},p.a.createElement(C.a,{classes:"my-5"})))))})))}}]),a}(c.Component);t.default=Object(x.b)((function(e){return{logged:e.app.logged,ownsProfile:e.profile.ownProfile,profilePicModal:e.app.profilePicModal.isVisible,profile:e.profile,posts:e.posts.items,postsLoading:e.posts.loading}}),(function(e){return{changeDescription:function(t){return e(function(e){return function(t){E.patch("user/settings/description",{description:e}).then((function(e){200===e.code&&t(Object(m.r)(e.response.newDescription))})).catch((function(e){return console.log(e)}))}}(t))},toggleNavbar:function(t){return e(Object(m.v)(t))},toggleProfilePictureModal:function(){return e(Object(m.x)())},toggleSidenav:function(){return e(Object(h.k)())},fetchProfile:function(t){return e(Object(h.h)(t))},newPost:function(t){return e(Object(f.n)(t))},fetchUserPosts:function(t){return e(Object(f.l)(t))},restartState:function(){return e(Object(h.i)())},toggleEditingDescription:function(){return e(Object(h.j)())},restartStatePosts:function(){return e(Object(f.o)())},logout:function(){return e(Object(m.o)())}}}))(U)},78:function(e,t,a){"use strict";var n=a(21),r=a(22),i=a(32),s=a(30),o=a(29),l=a(0),c=a.n(l),p=a(31),u=a(13),d=function(e){Object(s.a)(a,e);var t=Object(o.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).state={youtubeInput:!1,randomPhrasesTextarea:["What are you thinking?","It's a beautiful day isn't it","Tell us a story, i know you're not boring \u266a","In many ways, still miss good old days."],selectedPlaceholderPhrase:null},r.handleNewPost=r.handleNewPost.bind(Object(i.a)(r)),r.getRandomQuote=r.getRandomQuote.bind(Object(i.a)(r)),r.toggleYoutubeInput=r.toggleYoutubeInput.bind(Object(i.a)(r)),r}return Object(r.a)(a,[{key:"componentWillUnmount",value:function(){}},{key:"componentDidMount",value:function(){this.getRandomQuote()}},{key:"toggleYoutubeInput",value:function(){this.setState((function(e){return{youtubeInput:!e.youtubeInput}}))}},{key:"getRandomQuote",value:function(){var e=Math.floor(Math.random()*this.state.randomPhrasesTextarea.length);this.setState({selectedPlaceholderPhrase:this.state.randomPhrasesTextarea[e]})}},{key:"handleNewPost",value:function(e){e.preventDefault(),this.props.newPost({username:this.props.profileId,message:e.target.message.value,extra:{value:e.target.extra.value,extraType:"youtube"}}),e.target.message.value="",e.target.extra.value=""}},{key:"render",value:function(){return c.a.createElement("div",{className:"d-flex"},c.a.createElement("div",{className:"mr-4 d-none d-md-block"},c.a.createElement("img",{alt:"",src:this.props.logged.profilePic,className:"d-block mx-auto rounded-circle border",style:{width:"75px"}})),c.a.createElement("div",{className:"mt-2 w-100"},c.a.createElement("form",{onSubmit:this.handleNewPost},c.a.createElement("div",{className:"form-group"},c.a.createElement("textarea",{id:"message",name:"message",className:"form-control border-top-0 border-left-0 border-right-0 border-brand rounded-0 profile__body__textarea__input",required:!0,placeholder:this.state.selectedPlaceholderPhrase})),c.a.createElement("div",{className:"form-group"},c.a.createElement("input",{name:"extra",id:"extra",className:"form-control mt-2 "+(this.state.youtubeInput?"d-flex":"d-none"),placeholder:"https://www.youtube.com/watch?v=dO368WjwyFs"})),c.a.createElement("div",{className:"form-group"},c.a.createElement("button",{type:"submit",className:"btn btn-brand rounded-pill float-right text-white"},c.a.createElement("i",{className:"fas fa-paper-plane"})," Submit"),c.a.createElement("button",{type:"button",onClick:this.toggleYoutubeInput,className:"btn btn-brand-secondary text-white rounded-pill float-right px-3 mx-2"},c.a.createElement("i",{className:"fab fa-youtube"})," Youtube")))))}}]),a}(l.Component);t.a=Object(p.b)((function(e){return{logged:e.app.logged,profile:e.profile}}),(function(e){return{newPost:function(t){return e(Object(u.n)(t))}}}))(d)},79:function(e,t,a){"use strict";var n=a(0),r=a.n(n);t.a=function(e){return r.a.createElement("div",{className:"spinner-border text-brand "+e.classes},r.a.createElement("span",{className:"sr-only"},"Loading..."))}},82:function(e,t,a){"use strict";var n=a(21),r=a(22),i=a(32),s=a(30),o=a(29),l=a(0),c=a.n(l),p=a(31),u=a(88),d=a.n(u),m=a(89),f=a.n(m),h=a(13),b=a(33),g=a(5),v=a(90),E=a.n(v),y=a(6),x=a(91),P=function(e){Object(s.a)(a,e);var t=Object(o.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).deletePost=r.deletePost.bind(Object(i.a)(r)),r.canDeleteIt=r.canDeleteIt.bind(Object(i.a)(r)),r.handleLike=r.handleLike.bind(Object(i.a)(r)),r.parseText=r.parseText.bind(Object(i.a)(r)),f.a.extend(d.a),r}return Object(r.a)(a,[{key:"deletePost",value:function(){this.props.deletePost({postId:this.props._id})}},{key:"canDeleteIt",value:function(){return this.props.session._id&&this.props.author._id?this.props.session._id===this.props.author._id:this.props.session.username&&this.props.match.params.id?this.props.session.username===this.props.match.params.id:void 0}},{key:"parseText",value:function(){this.props.message.split}},{key:"handleLike",value:function(){if(!this.props.logged)return y.a.warn("You must be logged in to perform this action \ud83d\ude22",{position:"bottom-right"});this.props.liked?this.props.unlikePost(this.props._id):this.props.likePost(this.props._id)}},{key:"render",value:function(){return c.a.createElement("div",{className:"card w-100 my-5 post"},c.a.createElement("div",{className:"card-header bg-white pb-0 border-0 d-flex justify-content-between"},c.a.createElement("div",null,c.a.createElement("small",{className:"text-muted"},f()().from(f()(this.props.createdAt))," ago.")),c.a.createElement("div",{className:"d-flex"},c.a.createElement("div",null,c.a.createElement(b.b,{to:"/u/"+this.props.author.username},this.props.author.username)),c.a.createElement("div",{className:"post__avatar ml-2"},c.a.createElement(b.b,{to:"/u/"+this.props.author.username},c.a.createElement("img",{alt:"",src:this.props.author.profilePic,className:"img-fluid cursor-pointer rounded-circle"}))))),c.a.createElement("div",{className:"card-body px-4 py-4"},c.a.createElement(E.a,{properties:{target:"_blank"}},c.a.createElement("p",{className:"my-0 py-0 ws-pre-line"},this.props.message)),this.props.extra&&c.a.createElement("div",{className:"mt-3"},c.a.createElement(x.a,{videoId:this.props.extra.value,opts:{width:"100%",height:"400"}})),c.a.createElement("div",{onClick:this.handleLike,className:"d-inline-flex px-3 py-1 text-brand-secondary rounded-pill post__likes cursor-pointer"},c.a.createElement("span",null,this.props.likes," ",c.a.createElement("i",{className:"mr-1 ".concat(this.props.liked?"fas fa-heart":"far fa-heart")}))),this.canDeleteIt()&&c.a.createElement("div",{onClick:this.deletePost,className:"d-inline-flex px-3 py-1 rounded-pill post__delete cursor-pointer"},c.a.createElement("span",{className:"text-secondary"},c.a.createElement("i",{className:"fas fa-times"})))))}}]),a}(l.Component);t.a=Object(p.b)((function(e){return{logged:e.app.logged.isLogged,session:e.app.logged}}),(function(e){return{deletePost:function(t){return e(Object(h.j)(t))},likePost:function(t){return e(Object(h.m)(t))},unlikePost:function(t){return e(Object(h.p)(t))}}}))(Object(g.f)(P))},83:function(e,t,a){"use strict";var n=a(21),r=a(22),i=a(32),s=a(30),o=a(29),l=a(0),c=a.n(l),p=a(31),u=function(e){Object(s.a)(a,e);var t=Object(o.a)(a);function a(e){var r;return Object(n.a)(this,a),(r=t.call(this,e)).shouldDisplay=r.shouldDisplay.bind(Object(i.a)(r)),r}return Object(r.a)(a,[{key:"shouldDisplay",value:function(){var e=this.props.whenLogged;return(void 0===e||e)===this.props.session.isLogged}},{key:"render",value:function(){return c.a.createElement(c.a.Fragment,null,this.shouldDisplay()&&this.props.children)}}]),a}(l.Component);t.a=Object(p.b)((function(e){return{session:e.app.logged}}))(u)}}]);
//# sourceMappingURL=8.a61f49e9.chunk.js.map