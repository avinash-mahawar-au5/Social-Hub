{"version":3,"sources":["components/UserCard.js","pages/Explore.js","components/Loading.js","components/Post.js"],"names":["UserCard","className","this","props","class","alt","src","profilePic","username","description","to","Component","Explore","discoverPosts","discoverUsers","restartState","style","overflowX","overflowY","minHeight","usersLoading","Loading","users","map","user","key","_id","onBottom","posts","post","i","Post","postsLoading","connect","state","items","loading","dispatch","restartStatePosts","restartStateUsers","classes","deletePost","bind","canDeleteIt","handleLike","parseText","dayjs","extend","relativeTime","postId","session","author","match","params","id","message","split","logged","cogoToast","warn","position","liked","unlikePost","likePost","from","createdAt","properties","target","extra","videoId","value","opts","width","height","onClick","likes","app","isLogged","data","withRouter"],"mappings":"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","file":"static/js/9.7b894ccd.chunk.js","sourcesContent":["import React, { Component } from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nclass UserCard extends Component {\r\n  render() {\r\n    return (\r\n      <div className={\"user-card position-relative my-5 \" + this.props.class}>\r\n        <img\r\n          alt=\"\"\r\n          src={this.props.profilePic}\r\n          className=\"rounded-circle user-card__image bg-brand\"\r\n        />\r\n        <div className=\"user-card__body\">\r\n          <div className=\"user-card__body__info d-flex justify-content-center d-md-block\">\r\n            <h3 className=\"user-card__body__username montserrat\">\r\n              {this.props.username}\r\n            </h3>\r\n            <p className=\"mb-3 d-none d-md-block user-card__body__info__description montserrat\">\r\n              {this.props.description}\r\n            </p>\r\n          </div>\r\n          <div className=\"user-card__body__actions d-flex justify-content-center d-md-block\">\r\n            <Link to={\"/u/\" + this.props.username}>\r\n              <button className=\"btn btn-brand btn-sm rounded-pill text-white px-3\">\r\n                VIEW\r\n              </button>\r\n            </Link>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default UserCard;\r\n","import React, { Component } from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport {\r\n  discoverPosts,\r\n  restartState as restartStatePosts,\r\n} from \"../actions/posts\";\r\nimport {\r\n  discoverUsers,\r\n  restartState as restartStateUsers,\r\n} from \"../actions/users\";\r\nimport UserCard from \"../components/UserCard\";\r\nimport Post from \"../components/Post\";\r\nimport Loading from \"../components/Loading\";\r\nimport BottomScrollListener from \"react-bottom-scroll-listener\";\r\n\r\nclass Explore extends Component {\r\n  componentDidMount() {\r\n    this.props.discoverPosts();\r\n    this.props.discoverUsers();\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    this.props.restartState();\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div className=\"container my-5\">\r\n        <h2 className=\"montserrat\">Discover users</h2>\r\n        <div\r\n          className=\"d-inline-flex flex-row w-100 mb-5\"\r\n          style={{\r\n            overflowX: \"scroll\",\r\n            overflowY: \"hidden\",\r\n            minHeight: \"100px\",\r\n          }}\r\n        >\r\n          {this.props.usersLoading && (\r\n            <div className=\"d-flex justify-content-center m-auto\">\r\n              <Loading />\r\n            </div>\r\n          )}\r\n          {this.props.users.map((user) => (\r\n            <div\r\n              className={\"mx-3 mx-md-5 px-md-5 animated fadeIn\"}\r\n              key={user._id}\r\n            >\r\n              <UserCard {...user} />\r\n            </div>\r\n          ))}\r\n        </div>\r\n        <h2 className=\"montserrat\">Explore posts</h2>\r\n        <div className=\"row mt-5\">\r\n          <BottomScrollListener onBottom={this.props.discoverPosts}>\r\n            {this.props.posts.map((post, i) => (\r\n              <div\r\n                className=\"col-12 col-md-6 animated fadeIn\"\r\n                key={post._id + i}\r\n              >\r\n                <Post {...post} />\r\n              </div>\r\n            ))}\r\n            {this.props.postsLoading && (\r\n              <div className=\"d-flex justify-content-center m-auto my-5 py-5\">\r\n                <Loading />\r\n              </div>\r\n            )}\r\n          </BottomScrollListener>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nconst stateToProps = (state) => ({\r\n  posts: state.posts.items,\r\n  postsLoading: state.posts.loading,\r\n  users: state.users.items,\r\n  usersLoading: state.users.loading,\r\n});\r\n\r\nconst dispatchToProps = (dispatch) => ({\r\n  discoverPosts: () => dispatch(discoverPosts()),\r\n  discoverUsers: () => dispatch(discoverUsers()),\r\n  restartState: () => {\r\n    dispatch(restartStatePosts());\r\n    dispatch(restartStateUsers());\r\n  },\r\n});\r\n\r\nexport default connect(stateToProps, dispatchToProps)(Explore);\r\n","import React from 'react';\r\n\r\nexport default (props) => (\r\n\t<div className={'spinner-border text-brand' + ' ' + props.classes}>\r\n\t\t<span className=\"sr-only\">Loading...</span>\r\n\t</div>\r\n);","import React, { Component } from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport relativeTime from \"dayjs/plugin/relativeTime\";\r\nimport dayjs from \"dayjs\";\r\nimport { likePost, unlikePost, deletePost } from \"../actions/posts\";\r\nimport { Link, withRouter } from \"react-router-dom\";\r\nimport Linkify from \"react-linkify\";\r\nimport cogoToast from \"cogo-toast\";\r\nimport YouTube from \"react-youtube\";\r\n\r\nclass Post extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.deletePost = this.deletePost.bind(this);\r\n    this.canDeleteIt = this.canDeleteIt.bind(this);\r\n    this.handleLike = this.handleLike.bind(this);\r\n    this.parseText = this.parseText.bind(this);\r\n\r\n    dayjs.extend(relativeTime);\r\n  }\r\n\r\n  deletePost() {\r\n    this.props.deletePost({ postId: this.props._id });\r\n  }\r\n\r\n  canDeleteIt() {\r\n    if (this.props.session._id && this.props.author._id) {\r\n      // If i own the post.\r\n      return this.props.session._id === this.props.author._id;\r\n    } else if (this.props.session.username && this.props.match.params.id) {\r\n      // If the post is in my profile, even if i don't own it.\r\n      return this.props.session.username === this.props.match.params.id;\r\n    }\r\n  }\r\n\r\n  parseText() {\r\n    const reg = /(http:\\/\\/|https:\\/\\/)((\\w|=|\\?|\\.|\\/|&|-)+)/g;\r\n    const textFractions = this.props.message.split;\r\n  }\r\n\r\n  handleLike() {\r\n    if (!this.props.logged) {\r\n      return cogoToast.warn(`You must be logged in to perform this action ðŸ˜¢`, {\r\n        position: \"bottom-right\",\r\n      });\r\n    }\r\n\r\n    if (this.props.liked) {\r\n      this.props.unlikePost(this.props._id);\r\n    } else {\r\n      this.props.likePost(this.props._id);\r\n    }\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div className=\"card w-100 my-5 post\">\r\n        <div className=\"card-header bg-white pb-0 border-0 d-flex justify-content-between\">\r\n          <div>\r\n            <small className=\"text-muted\">\r\n              {dayjs().from(dayjs(this.props.createdAt))} ago.\r\n            </small>\r\n          </div>\r\n          <div className=\"d-flex\">\r\n            <div>\r\n              <Link to={\"/u/\" + this.props.author.username}>\r\n                {this.props.author.username}\r\n              </Link>\r\n            </div>\r\n            <div className=\"post__avatar ml-2\">\r\n              <Link to={\"/u/\" + this.props.author.username}>\r\n                <img\r\n                  alt=\"\"\r\n                  src={this.props.author.profilePic}\r\n                  className=\"img-fluid cursor-pointer rounded-circle\"\r\n                />\r\n              </Link>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div className=\"card-body px-4 py-4\">\r\n          <Linkify properties={{ target: \"_blank\" }}>\r\n            <p className=\"my-0 py-0 ws-pre-line\">{this.props.message}</p>\r\n          </Linkify>\r\n          {this.props.extra && (\r\n            <div className=\"mt-3\">\r\n              <YouTube\r\n                videoId={this.props.extra.value}\r\n                opts={{\r\n                  width: \"100%\",\r\n                  height: \"400\",\r\n                }}\r\n              />\r\n            </div>\r\n          )}\r\n          <div\r\n            onClick={this.handleLike}\r\n            className=\"d-inline-flex px-3 py-1 text-brand-secondary rounded-pill post__likes cursor-pointer\"\r\n          >\r\n            <span>\r\n              {this.props.likes}{\" \"}\r\n              <i\r\n                className={`mr-1 ${\r\n                  this.props.liked ? \"fas fa-heart\" : \"far fa-heart\"\r\n                }`}\r\n              ></i>\r\n            </span>\r\n          </div>\r\n          {this.canDeleteIt() && (\r\n            <div\r\n              onClick={this.deletePost}\r\n              className=\"d-inline-flex px-3 py-1 rounded-pill post__delete cursor-pointer\"\r\n            >\r\n              <span className=\"text-secondary\">\r\n                <i className=\"fas fa-times\"></i>\r\n              </span>\r\n            </div>\r\n          )}\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nconst stateToProps = (state) => ({\r\n  logged: state.app.logged.isLogged,\r\n  session: state.app.logged,\r\n});\r\n\r\nconst dispatchToProps = (dispatch) => ({\r\n  deletePost: (data) => dispatch(deletePost(data)),\r\n  likePost: (postId) => dispatch(likePost(postId)),\r\n  unlikePost: (postId) => dispatch(unlikePost(postId)),\r\n});\r\n\r\nexport default connect(stateToProps, dispatchToProps)(withRouter(Post));\r\n"],"sourceRoot":""}